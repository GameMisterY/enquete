<header class="header">
  {{ $parts := split .RelPermalink "/" }}

  {{ $production := eq (getenv "HUGO_ENVIRONMENT") "production" }}
  {{ $use_navigation := false }}
  {{ if $production }}
    {{ $use_navigation = gt (len $parts) 4 }}
  {{ else }}
    {{ $use_navigation = gt (len $parts) 3 }}
  {{ end }}

  {{ if $use_navigation }}
    {{ partial "site-navigation.html" . }}
  {{ else }}
    <h1>{{ .Title }}</h1>
  {{ end }}
</header>
<style>
  .header {
    top: 0;
    position: sticky;
    width: 100%;
    height: 80px;
    z-index: 1000;
    /*background-color: #e8d031ff;*/
    background-color: black;
    transition: all 1s ease;
    will-change: contents;
  }
  .header h1 {
    color: white;
    text-align: center;
  }
  .header-sticky {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    transition: all 2s ease;
    /*background: #e8d03140;*/
    background: #00000040;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
</style>
<script>
  window.addEventListener('scroll', () => {
    const header = document.querySelector(".header");
    if (window.scrollY > 80) {
      header.classList.add("header-sticky");
    } else {
      header.classList.remove("header-sticky");
    }
  });
</script>
